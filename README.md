# GBSPTools - Genesis3D BSP Tools

The GBSP, GVIS and GLIGHT tools together build and light your map for the Genesis3D Engine.
These tools were created to allow them to be used within different level editors for more flexibility.

Only takes as an input the G3D `.MAP` binary map file format. This file is generated by level editors from Genesis3D like GEdit, World Editor Pro, etc. which at the end of the day is what GBSPLib consumes and generates the `.BSP` file from there. In the future, `.3DT` support would be added.

Command-line arguments examples:
- Fast: `test_map -gbsp -entverbose -verbose -gvis -glight -minlight 64 64 64 -verbose`
- Full: `test_map -gbsp -entverbose -verbose -gvis -full -glight -minlight 64 64 64 -radiosity -extra -verbose`
- Only ents: `test_map -gbsp -entverbose -verbose -onlyents`
- Update lights (Fast) `test_map -gbsp -entverbose -verbose -onlyents -glight -minlight 64 64 64 -verbose`
- Update lights (Full) `test_map -gbsp -entverbose -verbose -onlyents -glight -minlight 64 64 64 -radiosity -extra -verbose`

> This program is meant to be used with [q2togbsp](https://github.com/rtxa/q2togbsp) which converts a Quake 1/2 .map level editor format to G3D `.MAP` binary map file format.

## Commands

### Shared by all tools
	// Outputs detailed compilation progress information.
	// Default: Off
	-verbose

### BSP - Creates level geometry from .map file into a playable .bsp file.
    // Outputs detailed entity information to the console window.
    // Default: Off
    -entverbose

    // Do an entity update from .map to .bsp
    // Default: Off
    -onlyents

### VIS - Performs potential visible set calculations on compiled level.

	// Performs full visibility calculations. When off, the calculated visibility
	// is less efficient at run-time, but takes much less time to compile.
	// Default: Off
	-full

	// Sort the portals you might see.
	// Default: Off
	-sortportals

### Light - Performs calculations to add lighting effects to the level.
	// Illuminates all surfaces with the light color specified.
	// Default: 0 0 0 | Range: 0-255 0-255 0-255
	-minlight r g b 

	// Light intensity multiplier for the entire level.
	// Higher numbers make the level brighter, lower numbers make the level darker.
	// Default: 1.0
	-lightscale #

    // Face reflectivity multiplier.
    // Higher numbers make the level brighter and more colorful.
    // Default: 1.0
    -reflectscale

	// Uses more samples to give finer lighting effects.
    // This switch should be used when running final map compiles.
    // Default: Off
    -extra

	// Performs radiosity lighting of the level after the default direct lighting has been computed.
	// Significantly increases compilation time.
	// Default: Off
	-radiosity

    // Number of times to bounce a ray during radiosity lighting. Higher numbers give more subtle lighting effects at the expense of compile time.
    // Default: 10
    -bounce #

    // Determines the size of the grid used when performing radiosity lighting. 
    // A larger patch size will produce less detailed and less sharp lighting effects. 
    // Smaller numbers increase light detail but also increase compilation time
    // and memory required to compile the level.
    // Default: 128
    -patchsize #

    // Set fast patching for fast compiles.
    // Default: Off
    -fastpatch


## Required files

- GBSPLib.dll from the Genesis3D engine fork you are going to create the map (Entidad 3D, Reality Factory, GTest and more).
